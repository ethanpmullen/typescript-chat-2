{"ast":null,"code":"var _jsxFileName = \"/Users/ethanmullen/Documents/GitHub/typescript-chat/client/src/components/Chat/index.tsx\";\nimport React from \"react\";\nimport { useEffect } from \"react\";\nimport InfoBar from \"./InfoBar\";\nimport Input from \"./Input\";\nimport Messages from \"./Messages\";\nimport { connect } from \"react-redux\";\nimport { doInitializeUser, doSetMessages } from \"./ducks/actions\";\nimport io from \"socket.io-client\";\nimport styled from \"@emotion/styled\";\n\nconst queryString = require(\"query-string\");\n\nconst select = state => ({\n  name: state.name,\n  room: state.room,\n  currentMessage: state.currentMessage,\n  messages: state.messages\n});\n\nconst actions = {\n  initializeUser: doInitializeUser,\n  setMessages: doSetMessages\n};\nlet socket;\n\nfunction Chat({\n  messages,\n  initializeUser,\n  setMessages\n}) {\n  const ENDPOINT = \"localhost:5000\";\n  useEffect(() => {\n    const {\n      name,\n      room\n    } = queryString.parse(window.location.search);\n    socket = io(ENDPOINT);\n    initializeUser(name, room);\n    socket.emit(\"join\", {\n      name,\n      room\n    }, error => {\n      if (error) {\n        alert(error);\n      }\n    });\n  }, [ENDPOINT, initializeUser]);\n  useEffect(() => {\n    socket.on(\"message\", message => {\n      setMessages(message);\n    });\n  }, [messages, setMessages]);\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ChatWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(InfoBar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Messages, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default connect(select, actions)(Chat);\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background: #03bb85;\n`;\nconst ChatWrapper = styled.div`\n  height: 600px;\n  width: 400px;\n  background: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-direction: column;\n  border-radius: 5px;\n  box-shadow: 0 2px 3px #000;\n`;","map":{"version":3,"sources":["/Users/ethanmullen/Documents/GitHub/typescript-chat/client/src/components/Chat/index.tsx"],"names":["React","useEffect","InfoBar","Input","Messages","connect","doInitializeUser","doSetMessages","io","styled","queryString","require","select","state","name","room","currentMessage","messages","actions","initializeUser","setMessages","socket","Chat","ENDPOINT","parse","window","location","search","emit","error","alert","on","message","Container","div","ChatWrapper"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,OAA1B;AAEA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,QAAP,MAAqB,YAArB;AAEA,SAASC,OAAT,QAAwC,aAAxC;AACA,SAASC,gBAAT,EAA2BC,aAA3B,QAAgD,iBAAhD;AAEA,OAAOC,EAAP,MAAe,kBAAf;AACA,OAAOC,MAAP,MAAmB,iBAAnB;;AACA,MAAMC,WAAW,GAAGC,OAAO,CAAC,cAAD,CAA3B;;AAEA,MAAMC,MAAM,GAAIC,KAAD,KAA4B;AACzCC,EAAAA,IAAI,EAAED,KAAK,CAACC,IAD6B;AAEzCC,EAAAA,IAAI,EAAEF,KAAK,CAACE,IAF6B;AAGzCC,EAAAA,cAAc,EAAEH,KAAK,CAACG,cAHmB;AAIzCC,EAAAA,QAAQ,EAAEJ,KAAK,CAACI;AAJyB,CAA5B,CAAf;;AAOA,MAAMC,OAAO,GAAG;AACdC,EAAAA,cAAc,EAAEb,gBADF;AAEdc,EAAAA,WAAW,EAAEb;AAFC,CAAhB;AAKA,IAAIc,MAAJ;;AAEA,SAASC,IAAT,CAAc;AACZL,EAAAA,QADY;AAEZE,EAAAA,cAFY;AAGZC,EAAAA;AAHY,CAAd,EAQG;AACD,QAAMG,QAAQ,GAAG,gBAAjB;AAEAtB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAM;AAAEa,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAiBL,WAAW,CAACc,KAAZ,CAAkBC,MAAM,CAACC,QAAP,CAAgBC,MAAlC,CAAvB;AAEAN,IAAAA,MAAM,GAAGb,EAAE,CAACe,QAAD,CAAX;AAEAJ,IAAAA,cAAc,CAACL,IAAD,EAAOC,IAAP,CAAd;AAEAM,IAAAA,MAAM,CAACO,IAAP,CAAY,MAAZ,EAAoB;AAAEd,MAAAA,IAAF;AAAQC,MAAAA;AAAR,KAApB,EAAqCc,KAAD,IAAgB;AAClD,UAAIA,KAAJ,EAAW;AACTC,QAAAA,KAAK,CAACD,KAAD,CAAL;AACD;AACF,KAJD;AAKD,GAZQ,EAYN,CAACN,QAAD,EAAWJ,cAAX,CAZM,CAAT;AAcAlB,EAAAA,SAAS,CAAC,MAAM;AACdoB,IAAAA,MAAM,CAACU,EAAP,CAAU,SAAV,EAAsBC,OAAD,IAA6C;AAChEZ,MAAAA,WAAW,CAACY,OAAD,CAAX;AACD,KAFD;AAGD,GAJQ,EAIN,CAACf,QAAD,EAAWG,WAAX,CAJM,CAAT;AAMA,sBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,CADF,CADF;AASD;;AACD,eAAef,OAAO,CAACO,MAAD,EAASM,OAAT,CAAP,CAAyBI,IAAzB,CAAf;AAEA,MAAMW,SAAS,GAAGxB,MAAM,CAACyB,GAAI;;;;;;CAA7B;AAQA,MAAMC,WAAW,GAAG1B,MAAM,CAACyB,GAAI;;;;;;;;;;CAA/B","sourcesContent":["import React from \"react\";\nimport { useEffect } from \"react\";\n\nimport InfoBar from \"./InfoBar\";\nimport Input from \"./Input\";\nimport Messages from \"./Messages\";\n\nimport { connect, RootStateOrAny } from \"react-redux\";\nimport { doInitializeUser, doSetMessages } from \"./ducks/actions\";\n\nimport io from \"socket.io-client\";\nimport styled from \"@emotion/styled\";\nconst queryString = require(\"query-string\");\n\nconst select = (state: RootStateOrAny) => ({\n  name: state.name,\n  room: state.room,\n  currentMessage: state.currentMessage,\n  messages: state.messages,\n});\n\nconst actions = {\n  initializeUser: doInitializeUser,\n  setMessages: doSetMessages,\n};\n\nlet socket: SocketIOClient.Socket;\n\nfunction Chat({\n  messages,\n  initializeUser,\n  setMessages,\n}: {\n  messages: { user: string; text: string }[];\n  initializeUser: (name: string, room: string) => void;\n  setMessages: Function;\n}) {\n  const ENDPOINT = \"localhost:5000\";\n\n  useEffect(() => {\n    const { name, room } = queryString.parse(window.location.search);\n\n    socket = io(ENDPOINT);\n\n    initializeUser(name, room);\n\n    socket.emit(\"join\", { name, room }, (error: any) => {\n      if (error) {\n        alert(error);\n      }\n    });\n  }, [ENDPOINT, initializeUser]);\n\n  useEffect(() => {\n    socket.on(\"message\", (message: { user: string; text: string }) => {\n      setMessages(message);\n    });\n  }, [messages, setMessages]);\n\n  return (\n    <Container>\n      <ChatWrapper>\n        <InfoBar />\n        <Messages />\n        <Input />\n      </ChatWrapper>\n    </Container>\n  );\n}\nexport default connect(select, actions)(Chat);\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background: #03bb85;\n`;\n\nconst ChatWrapper = styled.div`\n  height: 600px;\n  width: 400px;\n  background: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-direction: column;\n  border-radius: 5px;\n  box-shadow: 0 2px 3px #000;\n`;\n"]},"metadata":{},"sourceType":"module"}