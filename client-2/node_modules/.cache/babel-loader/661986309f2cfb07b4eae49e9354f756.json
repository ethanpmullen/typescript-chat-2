{"ast":null,"code":"var _jsxFileName = \"/Users/ethanmullen/Documents/GitHub/typescript-chat/client/src/components/Chat/index.tsx\";\nimport React from \"react\";\nimport { useEffect } from \"react\";\nimport InfoBar from \"./InfoBar\";\nimport Input from \"./Input\";\nimport Messages from \"./Messages\";\nimport { connect } from \"react-redux\";\nimport { doInitializeUser, doSetMessages } from \"./ducks/actions\";\nimport io from \"socket.io-client\";\nimport styled from \"@emotion/styled\";\n\nconst queryString = require(\"query-string\");\n\nlet socket;\n\nconst select = state => ({\n  name: state.name,\n  room: state.room,\n  currentMessage: state.currentMessage,\n  messages: state.messages\n});\n\nconst actions = {\n  initializeUser: doInitializeUser,\n  setMessages: doSetMessages\n};\n\nfunction Chat({\n  name,\n  room,\n  currentMessage,\n  messages,\n  initializeUser,\n  setMessages\n}) {\n  const ENDPOINT = \"localhost:5000\";\n  useEffect(() => {\n    const {\n      name,\n      room\n    } = queryString.parse(location.search);\n    socket = io(ENDPOINT);\n    initializeUser(name, room);\n    socket.emit(\"join\", {\n      name,\n      room\n    }, () => {});\n    return () => {\n      socket.emit(\"disconnect\");\n    };\n  }, [ENDPOINT]);\n  useEffect(() => {\n    socket.on(\"message\", incomingMessage => {\n      setMessages(messages, incomingMessage);\n    });\n  }, [messages]);\n  console.log(currentMessage, messages);\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ChatWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(InfoBar, {\n    room: room,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Messages, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default connect(select, actions)(Chat);\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background: #03bb85;\n`;\nconst ChatWrapper = styled.div`\n  height: 600px;\n  width: 400px;\n  background: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-direction: column;\n  border-radius: 5px;\n  box-shadow: 0 2px 3px #000;\n`;","map":{"version":3,"sources":["/Users/ethanmullen/Documents/GitHub/typescript-chat/client/src/components/Chat/index.tsx"],"names":["React","useEffect","InfoBar","Input","Messages","connect","doInitializeUser","doSetMessages","io","styled","queryString","require","socket","select","state","name","room","currentMessage","messages","actions","initializeUser","setMessages","Chat","ENDPOINT","parse","location","search","emit","on","incomingMessage","console","log","Container","div","ChatWrapper"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,OAA1B;AAEA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,QAAP,MAAqB,YAArB;AAEA,SAASC,OAAT,QAAwC,aAAxC;AACA,SAASC,gBAAT,EAA2BC,aAA3B,QAAgD,iBAAhD;AAEA,OAAOC,EAAP,MAAe,kBAAf;AACA,OAAOC,MAAP,MAAmB,iBAAnB;;AACA,MAAMC,WAAW,GAAGC,OAAO,CAAC,cAAD,CAA3B;;AAEA,IAAIC,MAAJ;;AAEA,MAAMC,MAAM,GAAIC,KAAD,KAA4B;AACzCC,EAAAA,IAAI,EAAED,KAAK,CAACC,IAD6B;AAEzCC,EAAAA,IAAI,EAAEF,KAAK,CAACE,IAF6B;AAGzCC,EAAAA,cAAc,EAAEH,KAAK,CAACG,cAHmB;AAIzCC,EAAAA,QAAQ,EAAEJ,KAAK,CAACI;AAJyB,CAA5B,CAAf;;AAOA,MAAMC,OAAO,GAAG;AACdC,EAAAA,cAAc,EAAEd,gBADF;AAEde,EAAAA,WAAW,EAAEd;AAFC,CAAhB;;AAKA,SAASe,IAAT,CAAc;AACZP,EAAAA,IADY;AAEZC,EAAAA,IAFY;AAGZC,EAAAA,cAHY;AAIZC,EAAAA,QAJY;AAKZE,EAAAA,cALY;AAMZC,EAAAA;AANY,CAAd,EAiBG;AACD,QAAME,QAAQ,GAAG,gBAAjB;AAEAtB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAM;AAAEc,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAiBN,WAAW,CAACc,KAAZ,CAAkBC,QAAQ,CAACC,MAA3B,CAAvB;AACAd,IAAAA,MAAM,GAAGJ,EAAE,CAACe,QAAD,CAAX;AAEAH,IAAAA,cAAc,CAACL,IAAD,EAAiBC,IAAjB,CAAd;AAEAJ,IAAAA,MAAM,CAACe,IAAP,CAAY,MAAZ,EAAoB;AAAEZ,MAAAA,IAAF;AAAQC,MAAAA;AAAR,KAApB,EAAoC,MAAM,CAAE,CAA5C;AACA,WAAO,MAAM;AACXJ,MAAAA,MAAM,CAACe,IAAP,CAAY,YAAZ;AACD,KAFD;AAGD,GAVQ,EAUN,CAACJ,QAAD,CAVM,CAAT;AAYAtB,EAAAA,SAAS,CAAC,MAAM;AACdW,IAAAA,MAAM,CAACgB,EAAP,CAAU,SAAV,EAAsBC,eAAD,IAAyB;AAC5CR,MAAAA,WAAW,CAACH,QAAD,EAAWW,eAAX,CAAX;AACD,KAFD;AAGD,GAJQ,EAIN,CAACX,QAAD,CAJM,CAAT;AAMAY,EAAAA,OAAO,CAACC,GAAR,CAAYd,cAAZ,EAA4BC,QAA5B;AACA,sBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAS,IAAA,IAAI,EAAEF,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,CADF,CADF;AASD;;AACD,eAAeX,OAAO,CAACQ,MAAD,EAASM,OAAT,CAAP,CAAyBG,IAAzB,CAAf;AAEA,MAAMU,SAAS,GAAGvB,MAAM,CAACwB,GAAI;;;;;;CAA7B;AAQA,MAAMC,WAAW,GAAGzB,MAAM,CAACwB,GAAI;;;;;;;;;;CAA/B","sourcesContent":["import React from \"react\";\nimport { useEffect } from \"react\";\n\nimport InfoBar from \"./InfoBar\";\nimport Input from \"./Input\";\nimport Messages from \"./Messages\";\n\nimport { connect, RootStateOrAny } from \"react-redux\";\nimport { doInitializeUser, doSetMessages } from \"./ducks/actions\";\n\nimport io from \"socket.io-client\";\nimport styled from \"@emotion/styled\";\nconst queryString = require(\"query-string\");\n\nlet socket: SocketIOClient.Socket;\n\nconst select = (state: RootStateOrAny) => ({\n  name: state.name,\n  room: state.room,\n  currentMessage: state.currentMessage,\n  messages: state.messages,\n});\n\nconst actions = {\n  initializeUser: doInitializeUser,\n  setMessages: doSetMessages,\n};\n\nfunction Chat({\n  name,\n  room,\n  currentMessage,\n  messages,\n  initializeUser,\n  setMessages,\n}: {\n  name: string;\n  room: string;\n  currentMessage: HTMLInputElement;\n  messages: { user: string; text: string }[];\n  initializeUser: (name: string, room: string) => void;\n  setMessages: (\n    messages: { user: string; text: string }[],\n    message: {}\n  ) => void;\n}) {\n  const ENDPOINT = \"localhost:5000\";\n\n  useEffect(() => {\n    const { name, room } = queryString.parse(location.search);\n    socket = io(ENDPOINT);\n\n    initializeUser(name as string, room as string);\n\n    socket.emit(\"join\", { name, room }, () => {});\n    return () => {\n      socket.emit(\"disconnect\");\n    };\n  }, [ENDPOINT]);\n\n  useEffect(() => {\n    socket.on(\"message\", (incomingMessage: {}) => {\n      setMessages(messages, incomingMessage);\n    });\n  }, [messages]);\n\n  console.log(currentMessage, messages);\n  return (\n    <Container>\n      <ChatWrapper>\n        <InfoBar room={room}></InfoBar>\n        <Messages />\n        <Input />\n      </ChatWrapper>\n    </Container>\n  );\n}\nexport default connect(select, actions)(Chat);\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background: #03bb85;\n`;\n\nconst ChatWrapper = styled.div`\n  height: 600px;\n  width: 400px;\n  background: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-direction: column;\n  border-radius: 5px;\n  box-shadow: 0 2px 3px #000;\n`;\n"]},"metadata":{},"sourceType":"module"}