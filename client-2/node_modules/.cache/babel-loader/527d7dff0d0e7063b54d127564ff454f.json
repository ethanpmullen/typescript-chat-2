{"ast":null,"code":"var _jsxFileName = \"/Users/ethanmullen/Documents/GitHub/typescript-chat/client/src/components/Chat/index.tsx\";\nimport React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport io from \"socket.io-client\";\nimport InfoBar from \"../InfoBar\";\nimport Input from \"../Input/Input\";\nimport Messages from \"../Messages\";\nimport styled from \"@emotion/styled\";\n\nconst queryString = require(\"query-string\");\n\nlet socket;\n\nfunction Chat({\n  location\n}) {\n  const [name, setName] = useState(\"\");\n  const [room, setRoom] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [messages, setMessages] = useState([]);\n  const ENDPOINT = \"localhost:5000\";\n  useEffect(() => {\n    const {\n      name,\n      room\n    } = queryString.parse(location.search);\n    socket = io(\"localhost:5000\");\n    setName(name);\n    setRoom(room);\n    socket.emit(\"join\", {\n      name,\n      room\n    }, () => {});\n    return () => {\n      socket.emit(\"disconnect\"); // socket.off();\n    };\n  }, [ENDPOINT, location.search]);\n  useEffect(() => {\n    socket.on(\"message\", message => {\n      setMessages([...messages, message]);\n    });\n  }, [messages]);\n\n  function sendMessage(event) {\n    event.preventDefault();\n\n    if (message) {\n      socket.emit(\"sendMessage\", message, () => setMessage(\"\"));\n    }\n  }\n\n  console.log(message, messages);\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ChatWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(InfoBar, {\n    room: room,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Messages, {\n    messages: messages,\n    name: name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    message: message,\n    setMessage: setMessage,\n    sendMessage: sendMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default Chat;\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background: #03bb85;\n`;\nconst ChatWrapper = styled.div`\n  height: 600px;\n  width: 400px;\n  background: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-direction: column;\n  border-radius: 5px;\n  box-shadow: 0 2px 3px #000;\n`;","map":{"version":3,"sources":["/Users/ethanmullen/Documents/GitHub/typescript-chat/client/src/components/Chat/index.tsx"],"names":["React","useState","useEffect","io","InfoBar","Input","Messages","styled","queryString","require","socket","Chat","location","name","setName","room","setRoom","message","setMessage","messages","setMessages","ENDPOINT","parse","search","emit","on","sendMessage","event","preventDefault","console","log","Container","div","ChatWrapper"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport io from \"socket.io-client\";\nimport InfoBar from \"../InfoBar\";\nimport Input from \"../Input/Input\";\nimport Messages from \"../Messages\";\nimport styled from \"@emotion/styled\";\nconst queryString = require(\"query-string\");\n\nlet socket: SocketIOClient.Socket;\n\nfunction Chat({ location }: { location: String }) {\n  const [name, setName] = useState<String | String[]>(\"\");\n  const [room, setRoom] = useState<String | String[]>(\"\");\n  const [message, setMessage] = useState<{}>(\"\");\n  const [messages, setMessages] = useState<{}[]>([]);\n  const ENDPOINT = \"localhost:5000\";\n\n  useEffect(() => {\n    const { name, room } = queryString.parse(location.search);\n    socket = io(\"localhost:5000\");\n\n    setName(name);\n    setRoom(room);\n\n    socket.emit(\"join\", { name, room }, () => {});\n    return () => {\n      socket.emit(\"disconnect\");\n      // socket.off();\n    };\n  }, [ENDPOINT, location.search]);\n\n  useEffect(() => {\n    socket.on(\"message\", (message: {}) => {\n      setMessages([...messages, message]);\n    });\n  }, [messages]);\n\n  function sendMessage(event: { preventDefault: () => void }) {\n    event.preventDefault();\n    if (message) {\n      socket.emit(\"sendMessage\", message, () => setMessage(\"\"));\n    }\n  }\n\n  console.log(message, messages);\n  return (\n    <Container>\n      <ChatWrapper>\n        <InfoBar room={room}></InfoBar>\n        <Messages messages={messages} name={name} />\n        <Input\n          message={message}\n          setMessage={setMessage}\n          sendMessage={sendMessage}\n        />\n      </ChatWrapper>\n    </Container>\n  );\n}\nexport default Chat;\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background: #03bb85;\n`;\n\nconst ChatWrapper = styled.div`\n  height: 600px;\n  width: 400px;\n  background: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-direction: column;\n  border-radius: 5px;\n  box-shadow: 0 2px 3px #000;\n`;\n"]},"metadata":{},"sourceType":"module"}