{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/ethanmullen/Documents/GitHub/typescript-chat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _toConsumableArray from\"/Users/ethanmullen/Documents/GitHub/typescript-chat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/ethanmullen/Documents/GitHub/typescript-chat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  height: 600px;\\n  width: 400px;\\n  background: white;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  flex-direction: column;\\n  border-radius: 5px;\\n  box-shadow: 0 2px 3px #000;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  height: 100vh;\\n  background: #03bb85;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import*as React from\"react\";import{useState,useEffect}from\"react\";import io from\"socket.io-client\";import InfoBar from\"../InfoBar\";import Input from\"../Input/Input\";import Messages from\"../Messages\";import styled from\"@emotion/styled\";var queryString=require(\"query-string\");var socket;function Chat(_ref){var location=_ref.location;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),room=_useState4[0],setRoom=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),messages=_useState8[0],setMessages=_useState8[1];var ENDPOINT=\"localhost:5000\";useEffect(function(){var _queryString$parse=queryString.parse(location.search),name=_queryString$parse.name,room=_queryString$parse.room;socket=io(\"localhost:5000\");setName(name);setRoom(room);socket.emit(\"join\",{name:name,room:room},function(){});return function(){socket.emit(\"disconnect\");// socket.off();\n};},[ENDPOINT,location.search]);useEffect(function(){socket.on(\"message\",function(message){setMessages([].concat(_toConsumableArray(messages),[message]));});},[messages]);function sendMessage(event){event.preventDefault();if(message){socket.emit(\"sendMessage\",message,function(){return setMessage(\"\");});}}console.log(message,messages);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(InfoBar,{room:room}),/*#__PURE__*/React.createElement(Messages,{messages:messages,name:name}),/*#__PURE__*/React.createElement(Input,{message:message,setMessage:setMessage,sendMessage:sendMessage})));}export default Chat;var Container=styled.div(_templateObject());var ChatWrapper=styled.div(_templateObject2());","map":{"version":3,"sources":["/Users/ethanmullen/Documents/GitHub/typescript-chat/client/src/components/Chat/index.tsx"],"names":["React","useState","useEffect","io","InfoBar","Input","Messages","styled","queryString","require","socket","Chat","location","name","setName","room","setRoom","message","setMessage","messages","setMessages","ENDPOINT","parse","search","emit","on","sendMessage","event","preventDefault","console","log","Container","div","ChatWrapper"],"mappings":"uoCAAA,MAAO,GAAKA,CAAAA,KAAZ,KAAuB,OAAvB,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,CAAAA,EAAP,KAAe,kBAAf,CACA,MAAOC,CAAAA,OAAP,KAAoB,YAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,gBAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,aAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,CACA,GAAMC,CAAAA,WAAW,CAAGC,OAAO,CAAC,cAAD,CAA3B,CAEA,GAAIC,CAAAA,MAAJ,CAEA,QAASC,CAAAA,IAAT,MAAkD,IAAlCC,CAAAA,QAAkC,MAAlCA,QAAkC,eACxBX,QAAQ,CAAoB,EAApB,CADgB,wCACzCY,IADyC,eACnCC,OADmC,8BAExBb,QAAQ,CAAoB,EAApB,CAFgB,yCAEzCc,IAFyC,eAEnCC,OAFmC,8BAGlBf,QAAQ,CAAK,EAAL,CAHU,yCAGzCgB,OAHyC,eAGhCC,UAHgC,8BAIhBjB,QAAQ,CAAO,EAAP,CAJQ,yCAIzCkB,QAJyC,eAI/BC,WAJ+B,eAKhD,GAAMC,CAAAA,QAAQ,CAAG,gBAAjB,CAEAnB,SAAS,CAAC,UAAM,wBACSM,WAAW,CAACc,KAAZ,CAAkBV,QAAQ,CAACW,MAA3B,CADT,CACNV,IADM,oBACNA,IADM,CACAE,IADA,oBACAA,IADA,CAEdL,MAAM,CAAGP,EAAE,CAAC,gBAAD,CAAX,CAEAW,OAAO,CAACD,IAAD,CAAP,CACAG,OAAO,CAACD,IAAD,CAAP,CAEAL,MAAM,CAACc,IAAP,CAAY,MAAZ,CAAoB,CAAEX,IAAI,CAAJA,IAAF,CAAQE,IAAI,CAAJA,IAAR,CAApB,CAAoC,UAAM,CAAE,CAA5C,EACA,MAAO,WAAM,CACXL,MAAM,CAACc,IAAP,CAAY,YAAZ,EACA;AACD,CAHD,CAID,CAZQ,CAYN,CAACH,QAAD,CAAWT,QAAQ,CAACW,MAApB,CAZM,CAAT,CAcArB,SAAS,CAAC,UAAM,CACdQ,MAAM,CAACe,EAAP,CAAU,SAAV,CAAqB,SAACR,OAAD,CAAiB,CACpCG,WAAW,8BAAKD,QAAL,GAAeF,OAAf,GAAX,CACD,CAFD,EAGD,CAJQ,CAIN,CAACE,QAAD,CAJM,CAAT,CAMA,QAASO,CAAAA,WAAT,CAAqBC,KAArB,CAA4D,CAC1DA,KAAK,CAACC,cAAN,GACA,GAAIX,OAAJ,CAAa,CACXP,MAAM,CAACc,IAAP,CAAY,aAAZ,CAA2BP,OAA3B,CAAoC,iBAAMC,CAAAA,UAAU,CAAC,EAAD,CAAhB,EAApC,EACD,CACF,CAEDW,OAAO,CAACC,GAAR,CAAYb,OAAZ,CAAqBE,QAArB,EACA,mBACE,4CACE,4CACE,oBAAC,OAAD,EAAS,IAAI,CAAEJ,IAAf,EADF,cAEE,oBAAC,QAAD,EAAU,QAAQ,CAAEI,QAApB,CAA8B,IAAI,CAAEN,IAApC,EAFF,cAGE,oBAAC,KAAD,EACE,OAAO,CAAEI,OADX,CAEE,UAAU,CAAEC,UAFd,CAGE,WAAW,CAAEQ,WAHf,EAHF,CADF,CADF,CAaD,CACD,cAAef,CAAAA,IAAf,CAEA,GAAMoB,CAAAA,SAAS,CAAGxB,MAAM,CAACyB,GAAV,mBAAf,CAQA,GAAMC,CAAAA,WAAW,CAAG1B,MAAM,CAACyB,GAAV,oBAAjB","sourcesContent":["import * as React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport io from \"socket.io-client\";\nimport InfoBar from \"../InfoBar\";\nimport Input from \"../Input/Input\";\nimport Messages from \"../Messages\";\nimport styled from \"@emotion/styled\";\nconst queryString = require(\"query-string\");\n\nlet socket: SocketIOClient.Socket;\n\nfunction Chat({ location }: { location: String }) {\n  const [name, setName] = useState<String | String[]>(\"\");\n  const [room, setRoom] = useState<String | String[]>(\"\");\n  const [message, setMessage] = useState<{}>(\"\");\n  const [messages, setMessages] = useState<{}[]>([]);\n  const ENDPOINT = \"localhost:5000\";\n\n  useEffect(() => {\n    const { name, room } = queryString.parse(location.search);\n    socket = io(\"localhost:5000\");\n\n    setName(name);\n    setRoom(room);\n\n    socket.emit(\"join\", { name, room }, () => {});\n    return () => {\n      socket.emit(\"disconnect\");\n      // socket.off();\n    };\n  }, [ENDPOINT, location.search]);\n\n  useEffect(() => {\n    socket.on(\"message\", (message: {}) => {\n      setMessages([...messages, message]);\n    });\n  }, [messages]);\n\n  function sendMessage(event: { preventDefault: () => void }) {\n    event.preventDefault();\n    if (message) {\n      socket.emit(\"sendMessage\", message, () => setMessage(\"\"));\n    }\n  }\n\n  console.log(message, messages);\n  return (\n    <div>\n      <div>\n        <InfoBar room={room}></InfoBar>\n        <Messages messages={messages} name={name} />\n        <Input\n          message={message}\n          setMessage={setMessage}\n          sendMessage={sendMessage}\n        />\n      </div>\n    </div>\n  );\n}\nexport default Chat;\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background: #03bb85;\n`;\n\nconst ChatWrapper = styled.div`\n  height: 600px;\n  width: 400px;\n  background: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-direction: column;\n  border-radius: 5px;\n  box-shadow: 0 2px 3px #000;\n`;\n"]},"metadata":{},"sourceType":"module"}