{"ast":null,"code":"var _jsxFileName = \"/Users/ethanmullen/Documents/GitHub/typescript-chat/client/src/components/Chat/index.tsx\";\nimport React from \"react\";\nimport { useEffect } from \"react\";\nimport InfoBar from \"./InfoBar\";\nimport Input from \"./Input\";\nimport Messages from \"./Messages\";\nimport { connect } from \"react-redux\";\nimport { doInitializeUser, doSetMessages } from \"./ducks/actions\";\nimport io from \"socket.io-client\";\nimport styled from \"@emotion/styled\";\n\nconst queryString = require(\"query-string\");\n\nconst select = state => ({\n  name: state.name,\n  room: state.room,\n  currentMessage: state.currentMessage,\n  messages: state.messages\n});\n\nconst actions = {\n  initializeUser: doInitializeUser,\n  setMessages: doSetMessages\n};\nconst ENDPOINT = \"localhost:5000\";\nlet sockt;\n\nfunction Chat({\n  messages,\n  initializeUser,\n  setMessages\n}) {\n  useEffect(() => {\n    const {\n      name,\n      room\n    } = queryString.parse(location.search);\n    socket = io(ENDPOINT);\n    setRoom(room);\n    setName(name);\n    socket.emit(\"join\", {\n      name,\n      room\n    }, error => {\n      if (error) {\n        alert(error);\n      }\n    });\n  }, [ENDPOINT, location.search]);\n  useEffect(() => {\n    socket.on(\"message\", message => {\n      setMessages(messages => [...messages, message]);\n    });\n    socket.on(\"roomData\", ({\n      users\n    }) => {\n      setUsers(users);\n    });\n  }, []);\n  useEffect(() => {\n    const {\n      name,\n      room\n    } = queryString.parse(window.location.search);\n    const socket = io(ENDPOINT);\n    initializeUser(name, room);\n    socket.emit(\"join\", {\n      name,\n      room\n    });\n  }, [ENDPOINT, window.location]);\n  useEffect(() => {\n    socket.on(\"message\", incomingMessage => {\n      setMessages(messages, incomingMessage);\n    });\n  }, [messages]);\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ChatWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(InfoBar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Messages, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default connect(select, actions)(Chat);\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background: #03bb85;\n`;\nconst ChatWrapper = styled.div`\n  height: 600px;\n  width: 400px;\n  background: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-direction: column;\n  border-radius: 5px;\n  box-shadow: 0 2px 3px #000;\n`;","map":{"version":3,"sources":["/Users/ethanmullen/Documents/GitHub/typescript-chat/client/src/components/Chat/index.tsx"],"names":["React","useEffect","InfoBar","Input","Messages","connect","doInitializeUser","doSetMessages","io","styled","queryString","require","select","state","name","room","currentMessage","messages","actions","initializeUser","setMessages","ENDPOINT","sockt","Chat","parse","location","search","socket","setRoom","setName","emit","error","alert","on","message","users","setUsers","window","incomingMessage","Container","div","ChatWrapper"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useEffect } from \"react\";\n\nimport InfoBar from \"./InfoBar\";\nimport Input from \"./Input\";\nimport Messages from \"./Messages\";\n\nimport { connect, RootStateOrAny } from \"react-redux\";\nimport { doInitializeUser, doSetMessages } from \"./ducks/actions\";\n\nimport io from \"socket.io-client\";\nimport styled from \"@emotion/styled\";\nconst queryString = require(\"query-string\");\n\nconst select = (state: RootStateOrAny) => ({\n  name: state.name,\n  room: state.room,\n  currentMessage: state.currentMessage,\n  messages: state.messages,\n});\n\nconst actions = {\n  initializeUser: doInitializeUser,\n  setMessages: doSetMessages,\n};\n\nconst ENDPOINT = \"localhost:5000\";\nlet sockt;\n\nfunction Chat({\n  messages,\n  initializeUser,\n  setMessages,\n}: {\n  messages: { user: string; text: string }[];\n  initializeUser: (name: string, room: string) => void;\n  setMessages: (\n    messages: { user: string; text: string }[],\n    message: {}\n  ) => void;\n}) {\n  useEffect(() => {\n    const { name, room } = queryString.parse(location.search);\n\n    socket = io(ENDPOINT);\n\n    setRoom(room);\n    setName(name);\n\n    socket.emit(\"join\", { name, room }, (error) => {\n      if (error) {\n        alert(error);\n      }\n    });\n  }, [ENDPOINT, location.search]);\n\n  useEffect(() => {\n    socket.on(\"message\", (message) => {\n      setMessages((messages) => [...messages, message]);\n    });\n\n    socket.on(\"roomData\", ({ users }) => {\n      setUsers(users);\n    });\n  }, []);\n\n  useEffect(() => {\n    const { name, room } = queryString.parse(window.location.search);\n    const socket = io(ENDPOINT);\n\n    initializeUser(name as string, room as string);\n\n    socket.emit(\"join\", { name, room });\n  }, [ENDPOINT, window.location]);\n\n  useEffect(() => {\n    socket.on(\"message\", (incomingMessage: {}) => {\n      setMessages(messages, incomingMessage);\n    });\n  }, [messages]);\n\n  return (\n    <Container>\n      <ChatWrapper>\n        <InfoBar />\n        <Messages />\n        <Input />\n      </ChatWrapper>\n    </Container>\n  );\n}\nexport default connect(select, actions)(Chat);\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background: #03bb85;\n`;\n\nconst ChatWrapper = styled.div`\n  height: 600px;\n  width: 400px;\n  background: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-direction: column;\n  border-radius: 5px;\n  box-shadow: 0 2px 3px #000;\n`;\n"]},"metadata":{},"sourceType":"module"}