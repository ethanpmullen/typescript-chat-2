{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/ethanmullen/Documents/GitHub/typescript-chat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  height: 600px;\\n  width: 400px;\\n  background: white;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  flex-direction: column;\\n  border-radius: 5px;\\n  box-shadow: 0 2px 3px #000;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  height: 100vh;\\n  background: #03bb85;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React from\"react\";import{useEffect}from\"react\";import InfoBar from\"./InfoBar\";import Input from\"./Input\";import Messages from\"./Messages\";import{connect}from\"react-redux\";import{doInitializeUser,doSetMessages}from\"./ducks/actions\";import io from\"socket.io-client\";import styled from\"@emotion/styled\";var queryString=require(\"query-string\");var select=function select(state){return{name:state.name,room:state.room,currentMessage:state.currentMessage,messages:state.messages};};var actions={initializeUser:doInitializeUser,setMessages:doSetMessages};var ENDPOINT=\"localhost:5000\";var socket;function Chat(_ref){var messages=_ref.messages,initializeUser=_ref.initializeUser,setMessages=_ref.setMessages;useEffect(function(){var _queryString$parse=queryString.parse(window.location.search),name=_queryString$parse.name,room=_queryString$parse.room;socket=io(ENDPOINT);initializeUser(name,room);socket.emit(\"join\",{name:name,room:room},function(error){if(error){alert(error);}});},[ENDPOINT,window.location.search]);useEffect(function(){socket.on(\"message\",function(message){setMessages(messages,message);});},[]);return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(ChatWrapper,null,/*#__PURE__*/React.createElement(InfoBar,null),/*#__PURE__*/React.createElement(Messages,null),/*#__PURE__*/React.createElement(Input,null)));}export default connect(select,actions)(Chat);var Container=styled.div(_templateObject());var ChatWrapper=styled.div(_templateObject2());","map":{"version":3,"sources":["/Users/ethanmullen/Documents/GitHub/typescript-chat/client/src/components/Chat/index.tsx"],"names":["React","useEffect","InfoBar","Input","Messages","connect","doInitializeUser","doSetMessages","io","styled","queryString","require","select","state","name","room","currentMessage","messages","actions","initializeUser","setMessages","ENDPOINT","socket","Chat","parse","window","location","search","emit","error","alert","on","message","Container","div","ChatWrapper"],"mappings":"6xBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,KAA0B,OAA1B,CAEA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CAEA,OAASC,OAAT,KAAwC,aAAxC,CACA,OAASC,gBAAT,CAA2BC,aAA3B,KAAgD,iBAAhD,CAEA,MAAOC,CAAAA,EAAP,KAAe,kBAAf,CACA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,CACA,GAAMC,CAAAA,WAAW,CAAGC,OAAO,CAAC,cAAD,CAA3B,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,KAAD,QAA4B,CACzCC,IAAI,CAAED,KAAK,CAACC,IAD6B,CAEzCC,IAAI,CAAEF,KAAK,CAACE,IAF6B,CAGzCC,cAAc,CAAEH,KAAK,CAACG,cAHmB,CAIzCC,QAAQ,CAAEJ,KAAK,CAACI,QAJyB,CAA5B,EAAf,CAOA,GAAMC,CAAAA,OAAO,CAAG,CACdC,cAAc,CAAEb,gBADF,CAEdc,WAAW,CAAEb,aAFC,CAAhB,CAKA,GAAMc,CAAAA,QAAQ,CAAG,gBAAjB,CACA,GAAIC,CAAAA,MAAJ,CAEA,QAASC,CAAAA,IAAT,MAWG,IAVDN,CAAAA,QAUC,MAVDA,QAUC,CATDE,cASC,MATDA,cASC,CARDC,WAQC,MARDA,WAQC,CACDnB,SAAS,CAAC,UAAM,wBACSS,WAAW,CAACc,KAAZ,CAAkBC,MAAM,CAACC,QAAP,CAAgBC,MAAlC,CADT,CACNb,IADM,oBACNA,IADM,CACAC,IADA,oBACAA,IADA,CAGdO,MAAM,CAAGd,EAAE,CAACa,QAAD,CAAX,CAEAF,cAAc,CAACL,IAAD,CAAOC,IAAP,CAAd,CAEAO,MAAM,CAACM,IAAP,CAAY,MAAZ,CAAoB,CAAEd,IAAI,CAAJA,IAAF,CAAQC,IAAI,CAAJA,IAAR,CAApB,CAAoC,SAACc,KAAD,CAAgB,CAClD,GAAIA,KAAJ,CAAW,CACTC,KAAK,CAACD,KAAD,CAAL,CACD,CACF,CAJD,EAKD,CAZQ,CAYN,CAACR,QAAD,CAAWI,MAAM,CAACC,QAAP,CAAgBC,MAA3B,CAZM,CAAT,CAcA1B,SAAS,CAAC,UAAM,CACdqB,MAAM,CAACS,EAAP,CAAU,SAAV,CAAqB,SAACC,OAAD,CAAkB,CACrCZ,WAAW,CAACH,QAAD,CAAWe,OAAX,CAAX,CACD,CAFD,EAGD,CAJQ,CAIN,EAJM,CAAT,CAMA,mBACE,oBAAC,SAAD,mBACE,oBAAC,WAAD,mBACE,oBAAC,OAAD,MADF,cAEE,oBAAC,QAAD,MAFF,cAGE,oBAAC,KAAD,MAHF,CADF,CADF,CASD,CACD,cAAe3B,CAAAA,OAAO,CAACO,MAAD,CAASM,OAAT,CAAP,CAAyBK,IAAzB,CAAf,CAEA,GAAMU,CAAAA,SAAS,CAAGxB,MAAM,CAACyB,GAAV,mBAAf,CAQA,GAAMC,CAAAA,WAAW,CAAG1B,MAAM,CAACyB,GAAV,oBAAjB","sourcesContent":["import React from \"react\";\nimport { useEffect } from \"react\";\n\nimport InfoBar from \"./InfoBar\";\nimport Input from \"./Input\";\nimport Messages from \"./Messages\";\n\nimport { connect, RootStateOrAny } from \"react-redux\";\nimport { doInitializeUser, doSetMessages } from \"./ducks/actions\";\n\nimport io from \"socket.io-client\";\nimport styled from \"@emotion/styled\";\nconst queryString = require(\"query-string\");\n\nconst select = (state: RootStateOrAny) => ({\n  name: state.name,\n  room: state.room,\n  currentMessage: state.currentMessage,\n  messages: state.messages,\n});\n\nconst actions = {\n  initializeUser: doInitializeUser,\n  setMessages: doSetMessages,\n};\n\nconst ENDPOINT = \"localhost:5000\";\nlet socket: SocketIOClient.Socket;\n\nfunction Chat({\n  messages,\n  initializeUser,\n  setMessages,\n}: {\n  messages: { user: string; text: string }[];\n  initializeUser: (name: string, room: string) => void;\n  setMessages: (\n    messages: { user: string; text: string }[],\n    message: {}\n  ) => void;\n}) {\n  useEffect(() => {\n    const { name, room } = queryString.parse(window.location.search);\n\n    socket = io(ENDPOINT);\n\n    initializeUser(name, room);\n\n    socket.emit(\"join\", { name, room }, (error: any) => {\n      if (error) {\n        alert(error);\n      }\n    });\n  }, [ENDPOINT, window.location.search]);\n\n  useEffect(() => {\n    socket.on(\"message\", (message: any) => {\n      setMessages(messages, message);\n    });\n  }, []);\n\n  return (\n    <Container>\n      <ChatWrapper>\n        <InfoBar />\n        <Messages />\n        <Input />\n      </ChatWrapper>\n    </Container>\n  );\n}\nexport default connect(select, actions)(Chat);\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background: #03bb85;\n`;\n\nconst ChatWrapper = styled.div`\n  height: 600px;\n  width: 400px;\n  background: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-direction: column;\n  border-radius: 5px;\n  box-shadow: 0 2px 3px #000;\n`;\n"]},"metadata":{},"sourceType":"module"}